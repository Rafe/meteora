#!/usr/bin/env coffee

path = require('path')
nopt = require('nopt')
_ = require('underscore')

meteora = require('../lib')

process.title = 'meteora'

defaultOpts =
  path: './'

opts =
  path: [String]
  version: Boolean
  title: [String]

digestOpts =
  'p': ['--path']
  'v': ['--version']
  't': ['--title']

options = _.extend(defaultOpts, nopt(opts, digestOpts))

command = options.argv.remain.shift() || ''

switch command
  when 'server', 's'
    meteora.commands['server'](options)
  when 'generate', 'g'
    meteora.commands['generate'](options)
  when 'post', 'p'
    meteora.commands['post'](options)
  when 'deploy', 'd'
    meteora.commands['deploy'](options)
  else
    meteora.commands['help']()
