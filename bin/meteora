#!/usr/bin/env coffee

path = require('path')
nopt = require('nopt')
_ = require('underscore')

meteora = require('../lib')

process.title = 'meteora'


defaultOpts =
  path: './'

opts =
  path: [String]
  version: Boolean
  title: [String]

digestOpts =
  'p': ['--path']
  'v': ['--version']
  't': ['--title']

options = _.extend(defaultOpts, nopt(opts, digestOpts))

if(process.argv[2] == 'server' or process.argv[2] == 's')
  meteora.commands['server'](options)
else if(process.argv[2] == 'generate' or process.argv[2] == 'g')
  meteora.commands['generate'](options)
else if(process.argv[2] == 'post' or process.argv[2] == 'p')
  meteora.commands['post'](options)
else
  meteora.commands['help']()
